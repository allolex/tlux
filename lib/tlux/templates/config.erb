# This file is automatically generated by tlux and should not be manually edited
# To make changes to your config edit the file at ~/.tlux/<%= name %>

source-file ~/.tmux.conf

new-session -s <%= name %> -n <%= windows.first.name %> -d
send-keys -t <%= name %> 'cd <%= dir %>' C-m

<% windows.each_with_index do |window, window_idx| %>
  <% if window_idx > 0 %>
    new-window -n <%= window.name %> -t <%= name %>
  <% end %>

  send-keys -t <%= name %> 'cd <%= dir %>' C-m

  <% window.commands.each do |command| %>
    send-keys -t <%= name %> '<%= command %>' C-m
  <% end %>

  <% window.panes.each_with_index do |pane, pane_idx| %>
    split-window <%= pane.orientation %> <%= pane.size %> -t <%= name %>
    send-keys -t <%= name %>:<%= window_idx + 1 %>.<%= pane_idx + 1 %> 'cd <%= dir %>' C-m
    <% pane.commands.each do |command| %>
      send-keys -t <%= name %>:<%= window_idx + 1 %>.<%= pane_idx + 1 %> '<%= command %>' C-m
    <% end %>
  <% end %>
<% end %>
